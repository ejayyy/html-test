<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <style>
        html body {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        h1,
        h3 {
            margin: 0;
        }

        #video-container video {
            position: absolute;
            width: 100%;
            height: 100vh;
            object-fit: cover;
            z-index: -1;
        }

        #filter {
            position: absolute;
            width: 100%;
            height: 100vh;
            background: #000;
            opacity: 0.3;
        }

        .position-fixed {
            position: fixed !important;
        }

        .fixed-text {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

        .section-container {
            position: relative;
            height: 100%;
        }

        #second-phrase {
            height: 80%;
        }

        #trigger4 {
            position: absolute;
            top: 10%;
        }

        .text-container {
            width: 100%;
            text-align: center;
            color: #fff;
            font-weight: 900;
            font-size: xx-large;
        }

        .testimonial-container {
            position: relative;
            background-color: salmon;
            font-size: large;
            padding-bottom: 12em;
        }

        #fade-in {
            opacity: 0;
        }

        footer {
            height: 300px;
        }
    </style>
    <title>Scroll Magic</title>
</head>

<body>
    <div id="video-container">
        <div id="filter" class="position-fixed"></div>
        <video class="position-fixed" autoplay loop muted>
            <source src="sample.mp4" type="video/webm">
        </video>
    </div>
    <section class="section-container">
        <article id="first-phrase" class="fixed-text text-container">
            <h1>Rooted in Fermentation</h1>
            <h1>Fueled by Tradition</h1>
        </article>
    </section>
    <section id="second-phrase" class="section-container">
        <article class="fixed-text text-container">
            <h3>Tradition meets perfection.</h3>
        </article>
        <div id="trigger4"></div>
    </section>
    <section id="fade-in" class="text-container testimonial-container">
        <article>
            <h3>WE ARE INDUSTRY LEADERS</h3>
            <p>
                in sharing the dynamic flavors of Korean food,<br>
                while maintaining integrity through quality ingredients<br>
                and offering both traditional and inventive products<br>
                that are Vegan, Gluten-Free, Organic and Non-GMO.
            </p>
        </article>
    </section>
    <footer id="footer">
        <h1>FOOTER</h1>
    </footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"
    integrity="sha512-8E3KZoPoZCD+1dgfqhPbejQBnQfBXe8FuwL4z/c8sTrgeDMFEnoyTlH3obB4/fV+6Sg0a0XF+L/6xS4Xx1fUEg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.8.0/gsap.min.js"
    integrity="sha512-eP6ippJojIKXKO8EPLtsUMS+/sAGHGo1UN/38swqZa1ypfcD4I0V/ac5G3VzaHfDaklFmQLEs51lhkkVaqg60Q=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.gsap.js"
    integrity="sha512-judXDFLnOTJsUwd55lhbrX3uSoSQSOZR6vNrsll+4ViUFv+XOIr/xaIK96soMj6s5jVszd7I97a0H+WhgFwTEg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/animation.velocity.min.js"
    integrity="sha512-ulK7pbTIY9j6WjPyRImdSqhubR5JN+KRrpCCSalyjqImnZeloOHjVLuMVux4QHte+dtApVNFJDYO4FTCvLa8yA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/plugins/debug.addIndicators.min.js"
    integrity="sha512-RvUydNGlqYJapy0t4AH8hDv/It+zKsv4wOQGb+iOnEfa6NnF2fzjXgRy+FDjSpMfC3sjokNUzsfYZaZ8QAwIxg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
    var controller = new ScrollMagic.Controller();
    document.addEventListener("DOMContentLoaded", function () {
        new ScrollMagic.Scene({
            triggerElement: "#video-container",
            triggerHook: "onLeave",
            offset: 20,
            duration: '80%'
        })
            .setTween(TweenMax.to("#first-phrase", { top: "0%" }))
            .addIndicators({ name: "1" })
            .addTo(controller);
        new ScrollMagic.Scene({
            triggerElement: "#video-container",
            triggerHook: "onLeave",
            duration: '80%'
        })
            .setTween(TweenMax.to("#filter", { opacity: 0.7 }))
            .addIndicators({ name: "2" })
            .addTo(controller);

        new ScrollMagic.Scene({
            triggerElement: "#first-phrase",
            offset: 200,
            duration: '80%'
        })
            .setTween(TweenMax.to("#second-phrase article", { top: "-5%" }))
            .addIndicators({ name: "3" })
            .addTo(controller);

        new ScrollMagic.Scene({
            triggerElement: "#trigger4",
            offset: 350,
            duration: '13%'
        })
            .setTween(TweenMax.to("#second-phrase", 0.5, { background: "rgb(250 128 114)" }))
            .addIndicators({ name: "4" })
            .addTo(controller);

        new ScrollMagic.Scene({
            triggerElement: "#trigger4",
            offset: 380,
            duration: '13%'
        })
            .setTween(TweenMax.to("#fade-in", 0.5, { opacity: 1 }))
            .addIndicators({ name: "5" })
            .addTo(controller);
        /*
                new ScrollMagic.Scene({
                    triggerElement: "#trigger4",
                    offset: 110,
                    duration: '30%'
                })
                    .setTween(TweenMax.to("#second-phrase", 0.5, { height: "80%" }))
                    .addIndicators({ name: "6" })
                    .addTo(controller);*/

        new ScrollMagic.Scene({
            triggerElement: "#second-phrase",
            offset: 500,
            duration: 100
        })
            .on("start", function () {
                document.querySelectorAll(`#filter, #video-container video`).forEach(x => x.classList.add('position-fixed'))
            })
            .on("end", function () {
                document.querySelectorAll(`#filter, #video-container video`).forEach(x => x.classList.remove('position-fixed'))
            })
            .addIndicators({ name: "7" })
            .addTo(controller);
    });
</script>

</html>